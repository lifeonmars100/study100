<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>나만의 단어장</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
</head>
<body>
    <div id="app-container">
        <!-- 설정 뷰 -->
        <div id="setup-view" class="view hidden">
            <div class="setup-box">
                <i class="fas fa-book-open setup-icon"></i>
                <h1>단어장 설정</h1>
                <p>학습을 시작하려면 단어 데이터 파일(words.json)을 먼저 가져와야 합니다.</p>
                <label for="file-input" class="btn btn-primary">
                    <i class="fas fa-file-import"></i> 단어 파일 가져오기
                </label>
                <input type="file" id="file-input" accept=".json">
                <p id="setup-status" class="setup-status"></p>
            </div>
        </div>

        <!-- 메인 대시보드 뷰 -->
        <div id="main-view" class="view hidden">
            <header class="app-header">
                <h1>나만의 단어장</h1>
                <div class="header-actions">
                    <button id="settings-btn" class="icon-btn"><i class="fas fa-cog"></i></button>
                </div>
            </header>
            <div id="dashboard-menu">
                <button class="dashboard-btn" id="study-btn"><i class="fas fa-book"></i><span>학습하기</span></button>
                <button class="dashboard-btn" id="favorites-study-btn"><i class="fas fa-star"></i><span>즐겨찾기</span></button>
                <button class="dashboard-btn" id="search-start-btn"><i class="fas fa-search"></i><span>검색하기</span></button>
                <button class="dashboard-btn" id="quiz-btn"><i class="fas fa-gamepad"></i><span>퀴즈</span></button>
            </div>
            <div class="add-word-container">
                 <button id="add-new-word-btn" class="btn btn-primary"><i class="fas fa-plus"></i> 새 단어 추가</button>
            </div>
        </div>

        <!-- 학습 일차 목록 뷰 -->
        <div id="day-list-view" class="view hidden">
            <header class="app-header">
                <button class="icon-btn back-to-main-btn"><i class="fas fa-arrow-left"></i></button>
                <h1 id="day-list-title">학습하기</h1>
            </header>
            <div id="day-list-container" class="scrollable-content"></div>
        </div>

        <!-- 검색 전용 뷰 -->
        <div id="search-view" class="view hidden">
             <header class="app-header">
                <button class="icon-btn back-to-main-btn"><i class="fas fa-arrow-left"></i></button>
                <h1>단어 검색</h1>
            </header>
            <div class="search-wrapper">
                <div class="search-container">
                    <i class="fas fa-search search-icon"></i>
                    <input type="text" id="search-input" placeholder="외국어, 모국어, 메모 내용 검색...">
                    <button id="clear-search-btn" class="icon-btn hidden"><i class="fas fa-times-circle"></i></button>
                </div>
            </div>
            <div id="word-list-container" class="scrollable-content"></div>
        </div>

        <!-- 상세(플래시카드) 뷰 -->
        <div id="detail-view" class="view hidden">
            <header class="app-header">
                <button id="back-to-list-btn" class="icon-btn"><i class="fas fa-arrow-left"></i></button>
                <div id="flashcard-progress" class="word-count"></div>
            </header>
            <div class="flashcard-wrapper">
                <div class="flashcard">
                    <div class="flashcard-inner">
                        <div id="flashcard-front" class="flashcard-face"><p id="flashcard-eng"></p></div>
                        <div id="flashcard-back" class="flashcard-face"><p id="flashcard-kor"></p></div>
                    </div>
                </div>
            </div>
            <div class="detail-controls">
                <button id="prev-card-btn" class="icon-btn large-icon"><i class="fas fa-chevron-left"></i></button>
                <button id="random-card-btn" class="icon-btn large-icon"><i class="fas fa-random"></i></button>
                <button id="toggle-lang-btn" class="icon-btn large-icon"><i class="fas fa-exchange-alt"></i></button>
                <button id="edit-word-btn" class="icon-btn large-icon"><i class="fas fa-pencil-alt"></i></button>
                <button id="next-card-btn" class="icon-btn large-icon"><i class="fas fa-chevron-right"></i></button>
                <button id="favorite-button" class="icon-btn large-icon"><i class="far fa-star"></i></button>
                <button id="speak-button" class="icon-btn large-icon"><i class="fas fa-volume-up"></i></button>
            </div>
        </div>
        
        <!-- 퀴즈 뷰 -->
        <div id="quiz-view" class="view hidden">
            <header class="app-header">
                <button id="quit-quiz-btn" class="icon-btn"><i class="fas fa-times"></i></button>
                <h1 id="quiz-title">퀴즈</h1>
                <div id="quiz-progress" class="word-count">1/10</div>
            </header>
            <div class="quiz-container">
                <div id="quiz-question" class="quiz-question-box"></div>
                <div id="quiz-options" class="quiz-options-grid"></div>
            </div>
            <div class="setting-action-center" style="padding: 20px; flex-shrink: 0;">
                 <button id="next-question-btn" class="btn btn-primary hidden">다음 문제</button>
            </div>
        </div>
    </div>

    <!-- 설정 모달 -->
    <div id="settings-modal" class="modal-overlay hidden">
        <div class="modal-content">
            <header class="modal-header">
                <h2>설정</h2>
                <button id="close-modal-btn" class="icon-btn modal-close-btn"><i class="fas fa-times"></i></button>
            </header>
            <div class="setting-item">
                <h4>폰트 크기</h4>
                <div class="controls-group">
                    <button id="decrease-font-btn" class="control-btn">-</button>
                    <span id="font-size-display" class="control-display">16px</span>
                    <button id="increase-font-btn" class="control-btn">+</button>
                </div>
            </div>
            <div class="setting-item">
                <h4>플래시카드 비율</h4>
                <p class="info-text">플래시카드의 세로 길이를 조절합니다.</p>
                <div class="controls-group">
                    <button id="decrease-card-ratio-btn" class="control-btn">-</button>
                    <span id="card-ratio-display" class="control-display">1.25</span>
                    <button id="increase-card-ratio-btn" class="control-btn">+</button>
                </div>
            </div>
            <div class="setting-item">
                <h4>대시보드 버튼 비율</h4>
                <p class="info-text">메인 화면 버튼의 세로 길이를 조절합니다.</p>
                <div class="controls-group">
                    <button id="decrease-dashboard-ratio-btn" class="control-btn">-</button>
                    <span id="dashboard-ratio-display" class="control-display">1.25</span>
                    <button id="increase-dashboard-ratio-btn" class="control-btn">+</button>
                </div>
            </div>
            <div class="setting-item">
                <h4>학습 일수 설정</h4>
                <p class="info-text">전체 단어를 며칠 동안 나눠서 학습할지 설정합니다.</p>
                <div class="controls-group">
                    <button id="decrease-days-btn" class="control-btn">-</button>
                    <span id="days-display" class="control-display">30일</span>
                    <button id="increase-days-btn" class="control-btn">+</button>
                </div>
            </div>
            <div class="setting-item">
                <h4>학습 순서 설정</h4>
                <p class="info-text">학습 계획 생성 시 단어를 배분하는 방식을 선택합니다.</p>
                <div class="controls-group" id="study-order-controls">
                    <button class="btn" data-order="random">무작위 배분</button>
                    <button class="btn" data-order="sequential">입력 순서대로</button>
                </div>
            </div>
            <div class="setting-item">
                <h4>퀴즈 설정</h4>
                <p class="info-text" style="margin-bottom: 10px;">퀴즈 정답 확인 후 다음 문제로 넘어가는 방식을 설정합니다.</p>
                <div class="controls-group" id="quiz-auto-toggle-controls">
                    <button class="btn" data-value="true">자동 진행</button>
                    <button class="btn" data-value="false">수동 진행</button>
                </div>
            </div>
            <div class="setting-item" id="quiz-time-control-container">
                <p class="info-text">자동 진행 시 다음 문제로 넘어갈 시간(초)을 설정합니다.</p>
                <div class="controls-group">
                    <button id="decrease-quiz-time-btn" class="control-btn">-</button>
                    <span id="quiz-time-display" class="control-display">1.2s</span>
                    <button id="increase-quiz-time-btn" class="control-btn">+</button>
                </div>
            </div>
            <div class="setting-item">
                <h4>데이터 관리 <span id="word-count-display" class="word-count"></span></h4>
                <p class="info-text">단어 데이터는 사용자의 브라우저에 저장됩니다. 데이터를 안전하게 보관하려면 주기적으로 내보내세요.</p>
                <div class="setting-action-center">
                    <label for="import-data-input" class="btn btn-primary">
                        <i class="fas fa-file-import"></i> 데이터 불러오기
                    </label>
                    <input type="file" id="import-data-input" class="hidden" accept=".json">
                    <button id="export-data-btn" class="btn btn-primary"><i class="fas fa-file-export"></i> 데이터 내보내기</button>
                    <button id="reset-data-btn" class="btn btn-danger"><i class="fas fa-trash-alt"></i> 모든 데이터 초기화</button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- 단어 추가 모달 -->
    <div id="add-word-modal" class="modal-overlay hidden">
        <div class="modal-content">
            <header class="modal-header">
                <h2>새 단어 추가</h2>
                <button id="close-add-modal-btn" class="icon-btn modal-close-btn"><i class="fas fa-times"></i></button>
            </header>
            <form id="add-word-form">
                <div class="form-group">
                    <label for="foreign-input">외국어</label>
                    <input type="text" id="foreign-input" required>
                </div>
                <div class="form-group">
                    <label for="native-input">모국어</label>
                    <input type="text" id="native-input" required>
                </div>
                <div class="form-group">
                    <label for="memo-input">메모 (선택)</label>
                    <textarea id="memo-input" rows="3"></textarea>
                </div>
                <div class="setting-action-center">
                    <button type="submit" class="btn btn-primary">저장하기</button>
                </div>
            </form>
        </div>
    </div>
    
    <!-- 단어 편집 모달 -->
    <div id="edit-word-modal" class="modal-overlay hidden">
        <div class="modal-content">
            <header class="modal-header">
                <h2>단어 편집</h2>
                <button id="close-edit-modal-btn" class="icon-btn modal-close-btn"><i class="fas fa-times"></i></button>
            </header>
            <form id="edit-word-form">
                <input type="hidden" id="edit-word-id">
                <div class="form-group">
                    <label for="edit-foreign-input">외국어</label>
                    <input type="text" id="edit-foreign-input" required>
                </div>
                <div class="form-group">
                    <label for="edit-native-input">모국어</label>
                    <input type="text" id="edit-native-input" required>
                </div>
                <div class="form-group">
                    <label for="edit-memo-input">메모 (선택)</label>
                    <textarea id="edit-memo-input" rows="3"></textarea>
                </div>
                <div class="setting-action-center" style="flex-direction: row; justify-content: center; gap: 10px;">
                    <button type="button" id="delete-word-btn" class="btn btn-danger">삭제하기</button>
                    <button type="submit" class="btn btn-primary">저장하기</button>
                </div>
            </form>
        </div>
    </div>

    <!-- 퀴즈 결과 모달 -->
    <div id="quiz-results-modal" class="modal-overlay hidden">
        <div class="modal-content" style="text-align: center;">
            <header class="modal-header">
                <h2>퀴즈 결과</h2>
            </header>
            <i class="fas fa-trophy" style="font-size: 48px; color: #ffcc00; margin-bottom: 20px;"></i>
            <h3 id="quiz-score-text">10개 중 8개 정답!</h3>
            <p id="quiz-message-text" style="margin-bottom: 25px;">훌륭해요!</p>
            <button id="close-results-modal-btn" class="btn btn-primary">확인</button>
        </div>
    </div>
    
    <div id="toast" class="toast"></div>
    <script src="app.js"></script>
</body>
</html>